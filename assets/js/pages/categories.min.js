"use strict";const form=document.forms["form-input"],getAll=async()=>{try{const f=await fetch(BASE_URL+"/kategori/get_all"),j=await f.json();return j}catch(err){console.log(err)}};(async $=>{const allData=await getAll(),tableMain=$("#table-main").DataTable({serverSide:!0,processing:!0,ajax:{url:BASE_URL+"/kategori/get_all_paginated"},pageLength:7,columns:[{data:"id",visible:!1},{data:"category_name",className:"align-center"},{data:"parent_category",visible:!1},{data:"parent_category",render(data,type,row,_meta){let parent="";return allData.find(x=>x.id==data)&&(parent=allData.find(x=>x.id==data).category_name),parent}},{data:null,render(data,type,row,_meta){const btn='<span class="d-flex flex-nowrap"><button role="button" class="btn-circle btn-success rounded-circle border-0"><i class="fas fa-edit"></i></button><button role="button" class="btn-circle btn-danger rounded-circle border-0"><i class="fas fa-trash"></i></button></span>';return btn}}]}),treedata=allData.map(x=>({id:x.id,text:x.category_name,parent:null==x.parent_category?"#":x.parent_category}));$("#tree-container").jstree({core:{multiple:!1,data:treedata},checkbox:{three_state:!1,tie_selection:!0},plugins:["checkbox"]}).bind("select_node.jstree",(e,data)=>{document.querySelector('input[name="category_parent"]').value=data.node.id}).bind("deselect_node.jstree",(e,data)=>{document.querySelector('input[name="category_parent"]').value=""}).bind("loaded.jstree",(e,data)=>{document.querySelector('input[name="category_parent"]').value&&$("#tree-container").jstree(!0).select_node(document.querySelector('input[name="category_parent"]').value)})})(jQuery);